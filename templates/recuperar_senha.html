{% extends "base.html" %}

{% block title %}Recuperar Senha{% endblock %}

{% block content %}
<h2>Recuperar Senha</h2>
<form id="recuperarSenhaForm" action="/verificar_codigo" method="post">
    <label for="emailRecuperacao">E-mail:</label>
    <input type="email" id="emailRecuperacao" name="email" required><br>
    <button type="button" class="btn-primary" onclick="enviarCodigo()">Enviar Código por E-mail</button><br><br>
    <label for="codigoRecuperacao">Código de Recuperação:</label>
    <input type="text" id="codigoRecuperacao" name="codigo_recuperacao" required disabled><br>
    <button type="submit" class="btn-primary" id="verificarCodigoBotao" disabled>Verificar Código</button>
</form>
<script>
    function enviarCodigo() {
        var email = document.getElementById('emailRecuperacao').value;
        fetch('/enviar_codigo', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams({
                email: email
            })
        })
        .then(response => response.text())
        .then(data => {
            alert(data);
            document.getElementById('codigoRecuperacao').disabled = false;
            document.getElementById('verificarCodigoBotao').disabled = false;
        })
        .catch(error => console.error('Erro:', error));
    }
</script>
{% endblock %}
